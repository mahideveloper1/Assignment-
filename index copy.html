<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Patient Dashboard</title>
    <!-- Link to external CSS file -->
    <link rel="stylesheet" href="styles.css" />
    <!-- Chart.js library -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  </head>
  <body>
    <!-- <div class="container"> -->
      
      <!-- Main content area -->
      <main class="main-content">
        <!-- Top navigation bar -->
        <nav class="navbar">
    <div class="navbar-left">
        <img src="Icon.png/TestLogo.svg" alt="Logo" class="navbar-logo">
    </div>

    <div class="navbar-center">
        <ul>
            <li>
                <img src="Icon.png/home_icon.svg" alt="Home Logo" class="home-logo">
                <a><i class="icon-overview"></i>Overview</a>
            </li>
            <li>
                <img src="Icon.png/patient.svg" alt="patient Logo" class="pateint-logo">
                <a><i class="icon-overview"></i>Patients</a>
            </li>
            <li>
                <img src="Icon.png/calender.svg" alt="calender Logo" class="calender-logo">
                <a><i class="icon-overview"></i>Schedule</a>
            </li>
            <li>
                <img src="Icon.png/chat_bubble.svg" alt="chat Logo" class="chat-logo">
                <a><i class="icon-overview"></i>Message</a>
            </li>
            <li>
                <img src="Icon.png/credit_card.svg" alt="credit Logo" class="credit-logo">
                <a><i class="icon-overview"></i>Transactions</a>
            </li>
            
        </ul>
    </div>

    <div class="navbar-right">
        <img src="Icon.png/senior-woman-doctor.png" alt="Doctor Photo" class="doctor-photo">
        <span>Dr. Jose Simmons</span>
        <span class="doctor-title">General Practitioner</span>
        <img src="Icon.png/settings.svg" alt="Settings" class="settings-icon">
        <img src="Icon.png/more_vert.svg" alt="More" class="more_vert">
    </div>
  </nav>

  <div class="sidebar">
  <div class="sidebar-header">
    <span class="sidebar-heading">Patients</span>
    <img src="Icon.png/search.svg" alt="Search Icon" class="search-icon">
  </div>
  <!-- Patient list  -->
  <ul class="patient-list">
    <li class="patient-item">
        <img src="Icon.png/Layer 8@2x.png" alt="Patient Image" class="patient-image">
        <div class="patient-info">
            <span class="patient-name">Emilly Williams</span>
            <img src="Icon.png/more_horiz.svg" alt="More Options" class="three-dots">
            <span class="patient-details">Female: 18</span>
        </div>
    </li>
    <li class="patient-item">
        <img src="Icon.png/Layer 1@2x.png" alt="Patient Image" class="patient-image">
        <div class="patient-info">
            <span class="patient-name">Ryan Johnson</span>
            <img src="Icon.png/more_horiz.svg" alt="More Options" class="three-dots">
            <span class="patient-details">Male: 45</span>
        </div>
    </li>
    <li class="patient-item">
        <img src="Icon.png/Layer 3@2x.png" alt="Patient Image" class="patient-image">
        <div class="patient-info">
            <span class="patient-name">Brandon Mitchell</span>
            <img src="Icon.png/more_horiz.svg" alt="More Options" class="three-dots">
            <span class="patient-details">Male: 36</span>
        </div>
    </li>
    <li class="patient-item">
        <img src="Icon.png/Layer 2@2x.png" alt="Patient Image" class="patient-image">
        <div class="patient-info">
            <span class="patient-name">jessica Taylor</span>
            <img src="Icon.png/more_horiz.svg" alt="More Options" class="three-dots">
            <span class="patient-details">Female: 28</span>
        </div>
    </li>
    <li class="patient-item">
        <img src="Icon.png/Layer 6@2x.png" alt="Patient Image" class="patient-image">
        <div class="patient-info">
            <span class="patient-name">Samantha Johnson</span>
            <img src="Icon.png/more_horiz.svg" alt="More Options" class="three-dots">
            <span class="patient-details">Female: 56</span>
        </div>
    </li>
    <li class="patient-item">
        <img src="Icon.png/Layer 12@2x.png" alt="Patient Image" class="patient-image">
        <div class="patient-info">
            <span class="patient-name">Ashley Martinez</span>
            <img src="Icon.png/more_horiz.svg" alt="More Options" class="three-dots">
            <span class="patient-details">Female: 54</span>
        </div>
    </li>
    <li class="patient-item">
        <img src="Icon.png/Layer 10@2x.png" alt="Patient Image" class="patient-image">
        <div class="patient-info">
            <span class="patient-name">Olivia Brown</span>
            <img src="Icon.png/more_horiz.svg" alt="More Options" class="three-dots">
            <span class="patient-details">Female: 32</span>
        </div>
    </li>
    <li class="patient-item">
        <img src="Icon.png/Layer 9@2x.png" alt="Patient Image" class="patient-image">
        <div class="patient-info">
            <span class="patient-name">Tyler Davis</span>
            <img src="Icon.png/more_horiz.svg" alt="More Options" class="three-dots">
            <span class="patient-details">Male: 19</span>
        </div>
    </li>
    <li class="patient-item">
        <img src="Icon.png/Layer 4@2x.png" alt="Patient Image" class="patient-image">
        <div class="patient-info">
            <span class="patient-name">Kevin Anderson</span>
            <img src="Icon.png/more_horiz.svg" alt="More Options" class="three-dots">
            <span class="patient-details">Male: 30</span>
        </div>
    </li>
    <li class="patient-item">
        <img src="Icon.png/Layer 5@2x.png" alt="Patient Image" class="patient-image">
        <div class="patient-info">
            <span class="patient-name">Dylan Thompson</span>
            <img src="Icon.png/more_horiz.svg" alt="More Options" class="three-dots">
            <span class="patient-details">Male: 36</span>
        </div>
    </li>
    <li class="patient-item">
        <img src="Icon.png/Layer 7@2x.png" alt="Patient Image" class="patient-image">
        <div class="patient-info">
            <span class="patient-name">Nathan Evans</span>
            <img src="Icon.png/more_horiz.svg" alt="More Options" class="three-dots">
            <span class="patient-details">Male: 58</span>
        </div>
    </li>
    <li class="patient-item">
        <img src="Icon.png/pexels-photo.png" alt="Patient Image" class="patient-image">
        <div class="patient-info">
            <span class="patient-name">Mike Nolan</span>
            <img src="Icon.png/more_horiz.svg" alt="More Options" class="three-dots">
            <span class="patient-details">Male: 31</span>
        </div>
    </li>
    
  </ul>
</div>

       <div class="right-sidebar">
        <img id="profile-photo" src="" alt="Profile Photo" class="profile-photo">
        <h3 id="profile-name" class="profile-name"></h3>
        <p><strong>Date of Birth:</strong> <span id="dob" class="info"></span></p>
        <p><strong>Gender:</strong> <span id="gender" class="info"></span></p>
        <p><strong>Contact Info:</strong> <span id="contact-info" class="info"></span></p>
        <p><strong>Emergency Contact:</strong> <span id="emergency-contact" class="info"></span></p>
        <p><strong>Insurance Provider:</strong> <span id="insurance-provider" class="info"></span></p>
        <button class="info-button">Show All Information</button>
    </div>
    
     <div class="lab-results-sidebar">
        <h2 class="sidebar-heading">Lab Results</h2>
        <table class="results-table">
            <tr>
                <td class="result-text">Blood Tests</td>
                <td class="result-icon"></td>
            </tr>
            <tr>
                <td class="result-text">CT Scans</td>
                <td class="result-icon"></td>
            </tr>
            <tr>
                <td class="result-text">X-Rays</td>
                <td class="result-icon"></td>
            </tr>
            <tr>
                <td class="result-text">MRI</td>
                <td class="result-icon"></td>
            </tr>
            <tr>
                <td class="result-text">Ultrasounds</td>
                <td class="result-icon"></td>
            </tr>
        </table>
    </div>

    <div class="diagnosis-card">
    <h2>Diagnosis History</h2>
    <div class="blood-pressure-card">
        <div class="blood-pressure-header">
            <h3>Blood Pressure</h3>
            <p>Last 6 months</p>
        </div>
        <canvas id="bloodPressureChart"></canvas>
        <div class="blood-pressure-values">
            <div>
                <span class="systolic-value"></span>
                <span class="pressure-type">Systolic</span>
                <span class="pressure-level systolic-level"></span>
            </div>
            <div>
                <span class="diastolic-value"></span>
                <span class="pressure-type">Diastolic</span>
                <span class="pressure-level diastolic-level"></span>
            </div>
        </div>
    </div>
</div>


   <script>
    const username = 'coalition';
    const password = 'skills-test';
    const auth = btoa(`${username}:${password}`);

    // Fetch the API data
    fetch("https://fedskillstest.coalitiontechnologies.workers.dev", {
        headers: {
            'Authorization': `Basic ${auth}`,
            'Content-Type': 'application/json'
        }
    })
    .then(response => response.json())
    .then(data => {
        const patient = data[3]; // Assuming the data is for the first patient
          // Update HTML with fetched data
          document.getElementById('profile-photo').src = patient.profile_picture;
          document.getElementById('profile-name').textContent = patient.name;
          document.getElementById('dob').textContent = new Date(patient.date_of_birth).toLocaleDateString('en-US');
          document.getElementById('gender').textContent = patient.gender;
          document.getElementById('contact-info').textContent = patient.phone_number;
          document.getElementById('emergency-contact').textContent = patient.emergency_contact;
          document.getElementById('insurance-provider').textContent = patient.insurance_type;
        // Blood pressure values over the last months
        const diagnosisHistory = patient.diagnosis_history;

        const months = diagnosisHistory.map(item => `${item.month}, ${item.year}`);
        const systolicValues = diagnosisHistory.map(item => item.blood_pressure.systolic.value);
        const diastolicValues = diagnosisHistory.map(item => item.blood_pressure.diastolic.value);

        // Update the systolic and diastolic numbers on the card
        document.querySelector('.systolic-value').textContent = diagnosisHistory[0].blood_pressure.systolic.value;
        document.querySelector('.systolic-level').textContent = diagnosisHistory[0].blood_pressure.systolic.levels;

        document.querySelector('.diastolic-value').textContent = diagnosisHistory[0].blood_pressure.diastolic.value;
        document.querySelector('.diastolic-level').textContent = diagnosisHistory[0].blood_pressure.diastolic.levels;

        // Render the chart
        const ctx = document.getElementById('bloodPressureChart').getContext('2d');
        new Chart(ctx, {
            type: 'line',
            data: {
                labels: months,
                datasets: [
                    {
                        label: 'Systolic',
                        data: systolicValues,
                        borderColor: '#f56565',
                        fill: false,
                        tension: 0.4,
                        pointBackgroundColor: '#f56565',
                    },
                    {
                        label: 'Diastolic',
                        data: diastolicValues,
                        borderColor: '#4299e1',
                        fill: false,
                        tension: 0.4,
                        pointBackgroundColor: '#4299e1',
                    }
                ]
            },
            options: {
                scales: {
                    y: {
                        beginAtZero: false,
                        min: 60,
                        max: 180
                    }
                }
            }
        });
    })
    .catch(error => console.error('Error fetching data:', error));
</script>


    </script>
  </body>
</html>
